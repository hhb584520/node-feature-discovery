<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta name="description" content="NFD-Master Commandline Flags Table of Contents -h, –help –version –prune –port –ca-file –cert-file –key-file –verify-node-name –no-publish –label-w..."> <meta name="revised" content=""> <meta name="author" content="Kubernetes SIGs"> <meta name="generator" content="jekyll-rtd-theme v2.0.9"> <meta property="og:title" content="Master Cmdline Reference · Node Feature Discovery"> <meta property="og:description" content="NFD-Master Commandline Flags Table of Contents -h, –help –version –prune –port –ca-file –cert-file –key-file –verify-node-name –no-publish –label-w..."> <meta property="og:locale" content="en"> <meta property="og:url" content="https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/master-commandline-reference.html"> <meta property="og:type" content="article"> <meta property="article:author" content="Kubernetes SIGs"> <meta property="article:published_time" content="2016-07-23T00:07:52-05:00"> <meta property="article:modified_time" content="2020-12-03T04:35:07-06:00"> <meta name="twitter:title" content="Master Cmdline Reference · Node Feature Discovery"> <meta name="twitter:description" content="NFD-Master Commandline Flags Table of Contents -h, –help –version –prune –port –ca-file –cert-file –key-file –verify-node-name –no-publish –label-w..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@Kubernetes SIGs"> <meta name="twitter:url" content="https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/master-commandline-reference.html"> <meta name="twitter:creator" content="@jekyll-rtd-theme v2.0.9"> <title>Master Cmdline Reference · Node Feature Discovery</title> <link rel="dns-prefetch" href="https://rundocs-analytics.glitch.me"> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"> <link rel="canonical" href="https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/master-commandline-reference.html"><link rel="prev" href="https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/developer-guide.html"><link rel="next" href="https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/worker-commandline-reference.html"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.9/assets/css/theme.min.css"> <link rel="icon" type="image/svg+xml" href="/node-feature-discovery/master/assets/images/favicon.svg"> <link rel="icon" type="image/png" href="/node-feature-discovery/master/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/node-feature-discovery/master/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/node-feature-discovery/master/assets/images/favicon-96x96.png" sizes="96x96"> <link rel="mask-icon" href="/node-feature-discovery/master/assets/images/favicon.svg" color="#2980b9"> <link rel="apple-touch-icon" href="/node-feature-discovery/master/assets/images/apple-touch-icon-300x300.jpg"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "https://kubernetes-sigs.github.com/node-feature-discovery/master/advanced/master-commandline-reference.html" }, "headline": "Master Cmdline Reference · Node Feature Discovery", "image": [], "author": { "@type": "Person", "name": "Kubernetes SIGs" }, "datePublished": "2016-07-23T00:07:52-05:00", "dateModified": "2020-12-03T04:35:07-06:00", "publisher": { "@type": "Organization", "name": "Kubernetes SIGs", "logo": { "@type": "ImageObject", "url": "https://avatars1.githubusercontent.com/u/36015203?v=4" } }, "description": "NFD-Master Commandline Flags Table of Contents -h, –help –version –prune –port –ca-file –cert-file –key-file –verify-node-name –no-publish –label-w..." } </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/node-feature-discovery/master/" title="Documentation of Node Feature Discovery - a Kubernetes add-on for discovering and advertising hardware features and system configuration in the cluster."> <i class="fa fa-home"></i> Node Feature Discovery </a> </div> <span class="version">master</span> <form class="search pt-2" action="/node-feature-discovery/master/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> </ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/node-feature-discovery/master/get-started/"> Get started </a><ul> <li class="toc level-1 " data-sort="1" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/get-started/introduction.html">1. Introduction</a> </li> <li class="toc level-1 " data-sort="2" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/get-started/quick-start.html">2. Quick Start</a> </li> <li class="toc level-1 " data-sort="3" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/get-started/deployment-and-usage.html">3. Deployment and Usage</a> </li> <li class="toc level-1 " data-sort="4" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/get-started/features.html">4. Feature Discovery</a> </li> <li class="toc level-1 " data-sort="5" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/get-started/examples-and-demos.html">5. Examples and Demos</a> </li></ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/node-feature-discovery/master/advanced/"> Advanced </a><ul> <li class="toc level-1 " data-sort="1" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/advanced/developer-guide.html">1. Developer Guide</a> </li> <li class="toc level-1 current" data-sort="2" data-level="1"> <a class="d-flex flex-items-baseline current" href="/node-feature-discovery/master/advanced/master-commandline-reference.html">2. Master Cmdline Reference</a> </li> <li class="toc level-1 " data-sort="3" data-level="1"> <a class="d-flex flex-items-baseline " href="/node-feature-discovery/master/advanced/worker-commandline-reference.html">3. Worker Cmdline Reference</a> </li></ul> <a class="caption d-block text-uppercase no-wrap px-2 py-0" href="/node-feature-discovery/master/contributing/"> Contributing </a><ul> </ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/node-feature-discovery/master/">Node Feature Discovery</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/node-feature-discovery/master/" title="/"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" ><a href="/node-feature-discovery/master/advanced/">advanced</a></li><li class="breadcrumb-item" aria-current="page">master-commandline-reference.md</li></ul> <a class="edit" href="https://github.com/kubernetes-sigs/node-feature-discovery/edit/gh-pages/advanced/master-commandline-reference.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="http://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 class="no_toc" id="nfd-master-commandline-flags">NFD-Master Commandline Flags</h1> <h2 class="no_toc text-delta" id="table-of-contents">Table of Contents</h2> <ol id="markdown-toc"> <li><a href="#-h-help" id="markdown-toc--h-help">-h, –help</a></li> <li><a href="#version" id="markdown-toc-version">–version</a></li> <li><a href="#prune" id="markdown-toc-prune">–prune</a></li> <li><a href="#port" id="markdown-toc-port">–port</a></li> <li><a href="#ca-file" id="markdown-toc-ca-file">–ca-file</a></li> <li><a href="#cert-file" id="markdown-toc-cert-file">–cert-file</a></li> <li><a href="#key-file" id="markdown-toc-key-file">–key-file</a></li> <li><a href="#verify-node-name" id="markdown-toc-verify-node-name">–verify-node-name</a></li> <li><a href="#no-publish" id="markdown-toc-no-publish">–no-publish</a></li> <li><a href="#label-whitelist" id="markdown-toc-label-whitelist">–label-whitelist</a></li> <li><a href="#extra-label-ns" id="markdown-toc-extra-label-ns">–extra-label-ns</a></li> <li><a href="#resource-labels" id="markdown-toc-resource-labels">–resource-labels</a></li> </ol> <hr /> <p>To quickly view available command line flags execute <code class="language-plaintext highlighter-rouge notranslate">nfd-master --help</code>. In a docker container:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>docker run gcr.io/k8s-staging-nfd/node-feature-discovery:master nfd-master <span class="nt">--help</span>
</code></pre>  </div></div> <h3 id="-h-help">-h, –help</h3> <p>Print usage and exit.</p> <h3 id="version">–version</h3> <p>Print version and exit.</p> <h3 id="prune">–prune</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--prune</code> flag is a sub-command like option for cleaning up the cluster. It causes nfd-master to remove all NFD related labels, annotations and extended resources from all Node objects of the cluster and exit.</p> <h3 id="port">–port</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--port</code> flag specifies the TCP port that nfd-master listens for incoming requests.</p> <p>Default: 8080</p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--port</span><span class="o">=</span>443
</code></pre>  </div></div> <h3 id="ca-file">–ca-file</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code> is one of the three flags (together with <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--key-file</code>) controlling master-worker mutual TLS authentication on the nfd-master side. This flag specifies the TLS root certificate that is used for authenticating incoming connections. NFD-Worker side needs to have matching key and cert files configured in order for the incoming requests to be accepted.</p> <p>Default: <em>empty</em></p> <p>Note: Must be specified together with <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--key-file</code></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--ca-file</span><span class="o">=</span>/opt/nfd/ca.crt <span class="nt">--cert-file</span><span class="o">=</span>/opt/nfd/master.crt <span class="nt">--key-file</span><span class="o">=</span>/opt/nfd/master.key
</code></pre>  </div></div> <h3 id="cert-file">–cert-file</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code> is one of the three flags (together with <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--key-file</code>) controlling master-worker mutual TLS authentication on the nfd-master side. This flag specifies the TLS certificate presented for authenticating outgoing traffic towards nfd-worker.</p> <p>Default: <em>empty</em></p> <p>Note: Must be specified together with <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--key-file</code></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--cert-file</span><span class="o">=</span>/opt/nfd/master.crt <span class="nt">--key-file</span><span class="o">=</span>/opt/nfd/master.key <span class="nt">--ca-file</span><span class="o">=</span>/opt/nfd/ca.crt
</code></pre>  </div></div> <h3 id="key-file">–key-file</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--key-file</code> is one of the three flags (together with <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code>) controlling master-worker mutual TLS authentication on the nfd-master side. This flag specifies the private key corresponding the given certificate file (<code class="language-plaintext highlighter-rouge notranslate">--cert-file</code>) that is used for authenticating outgoing traffic.</p> <p>Default: <em>empty</em></p> <p>Note: Must be specified together with <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--key-file</span><span class="o">=</span>/opt/nfd/master.key <span class="nt">--cert-file</span><span class="o">=</span>/opt/nfd/master.crt <span class="nt">--ca-file</span><span class="o">=</span>/opt/nfd/ca.crt
</code></pre>  </div></div> <h3 id="verify-node-name">–verify-node-name</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--verify-node-name</code> flag controls the NodeName based authorization of incoming requests and only has effect when mTLS authentication has been enabled (with <code class="language-plaintext highlighter-rouge notranslate">--ca-file</code>, <code class="language-plaintext highlighter-rouge notranslate">--cert-file</code> and <code class="language-plaintext highlighter-rouge notranslate">--key-file</code>). If enabled, the worker node name of the incoming must match with the CN in its TLS certificate. Thus, workers are only able to label the node they are running on (or the node whose certificate they present), and, each worker must have an individual certificate.</p> <p>Node Name based authorization is disabled by default and thus it is possible for all nfd-worker pods in the cluster to use one shared certificate, making NFD deployment much easier.</p> <p>Default: <em>false</em></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--verify-node-name</span> <span class="nt">--ca-file</span><span class="o">=</span>/opt/nfd/ca.crt <span class="se">\</span>
    <span class="nt">--cert-file</span><span class="o">=</span>/opt/nfd/master.crt <span class="nt">--key-file</span><span class="o">=</span>/opt/nfd/master.key
</code></pre>  </div></div> <h3 id="no-publish">–no-publish</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--no-publish</code> flag disables all communication with the Kubernetes API server, making a "dry-run" flag for nfd-master. No Labels, Annotations or ExtendedResources (or any other properties of any Kubernetes API objects) are modified.</p> <p>Default: <em>false</em></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--no-publish</span>
</code></pre>  </div></div> <h3 id="label-whitelist">–label-whitelist</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--label-whitelist</code> specifies a regular expression for filtering feature labels based on their name. Each label must match against the given reqular expression in order to be published.</p> <p>Note: The regular expression is only matches against the "basename" part of the label, i.e. to the part of the name after ‘/'. The label namespace is omitted.</p> <p>Default: <em>empty</em></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--label-whitelist</span><span class="o">=</span><span class="s1">'.*cpuid\.'</span>
</code></pre>  </div></div> <h3 id="extra-label-ns">–extra-label-ns</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--extra-label-ns</code> flag specifies a comma-separated list of allowed feature label namespaces. By default, nfd-master only allows creating labels in the default <code class="language-plaintext highlighter-rouge notranslate">feature.node.kubernetes.io</code> label namespace. This option can be used to allow vendor-specific namespaces for custom labels from the local and custom feature sources.</p> <p>The same namespace control and this flag applies Extended Resources (created with <code class="language-plaintext highlighter-rouge notranslate">--resource-labels</code>), too.</p> <p>Default: <em>empty</em></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--extra-label-ns</span><span class="o">=</span>vendor-1.com,vendor-2.io
</code></pre>  </div></div> <h3 id="resource-labels">–resource-labels</h3> <p>The <code class="language-plaintext highlighter-rouge notranslate">--resource-labels</code> flag specifies a comma-separated list of features to be advertised as extended resources instead of labels. Features that have integer values can be published as Extended Resources by listing them in this flag.</p> <p>Default: <em>empty</em></p> <p>Example:</p> <div class="language-bash highlighter-rouge notranslate"><div class="highlight"><pre class="highlight"><code>nfd-master <span class="nt">--resource-labels</span><span class="o">=</span>vendor-1.com/feature-1,vendor-2.io/feature-2
</code></pre>  </div></div> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/node-feature-discovery/master/advanced/developer-guide.html" class="btn" title="Developer Guide" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"><a href="/node-feature-discovery/master/advanced/worker-commandline-reference.html" class="btn" title="Worker Cmdline Reference" accesskey="n" rel="next"> Next <i class="fa fa-arrow-circle-right"></i> </a></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2016-2020,</span> <a class="text-gray" href="https://github.com/kubernetes-sigs" rel="noreferrer" target="_blank">Kubernetes SIGs</a> Revision <a class="text-gray" href="https://github.com/kubernetes-sigs/node-feature-discovery/commit/" title="" rel="noreferrer" target="_blank"></a> <br> <div class="generator"> Built with <a href="https://jekyllrb.com" rel="noreferrer" target="_blank">Jekyll</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="remote theme: jekyll-rtd-theme v2.0.9">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> Node Feature Discovery </div> <div class="branch p-1"> <span class="name"> master </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl id="versions"> <dt>Versions</dt> <script src="/node-feature-discovery/versions.js"></script> <script> var dt = document.getElementById('versions'); var items = getVersionListItems(); for (var i=0; i < items.length; i++) { var dd = document.createElement('dd'); var a = dd.appendChild(document.createElement('a')); a.appendChild(document.createTextNode(items[i].name)); a.href = items[i].url; dt.appendChild(dd); } </script> </dl> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/kubernetes-sigs/node-feature-discovery" title="Stars: 234"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/kubernetes-sigs/node-feature-discovery/issues" title="Open issues: 12"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/kubernetes-sigs/node-feature-discovery/zipball/gh-pages" title="Size: 78600 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> The <a href="/node-feature-discovery/master/">software</a> is under the terms of <a href="https://github.com/kubernetes-sigs/node-feature-discovery">Apache License 2.0</a>. </div> </div> </div> <script> window.ui = { title: "Node Feature Discovery", baseurl: "/node-feature-discovery/master", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.9/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.9/assets/js/theme.min.js"></script> </body> </html>